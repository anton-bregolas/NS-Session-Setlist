<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=860" />
<meta property="og:image" content="https://michaeleskin.com/abctools/img/abc-icon.png" />

<title>Novi Sad Session Setlist</title>

<style>

    body {
        font-family: Arial, sans-serif;
        background-image: linear-gradient(90deg, #003300 25%, #663399 100%);;
        margin: 0px;
        padding: 0px;
    }

    .container {
        margin: 0 auto;
        text-align: center;
        overflow-x: hidden;
    }

    h1 {
        font-size: 24px;
        margin-top: 16px;
        margin-bottom: 0px;
        color: #ffd324;
    }

    h2 {
        font-size: 16px;
        margin-top: 8px;
        margin-bottom: 0px;
        color: #ffd324;
    }

    p {
        color: #ffd324;
    }

    a {
        color: #ff6699;
    }
    a:link {
        color: #ff6699;
    }
    a:visited {
        color: #ff6699;
    }
    a:hover {
        color: #ff6699;
    }
    a:active {
        color: #ff6699;
    }

    #fullscreenbutton {
        position: fixed;
        top: 16px;   /* Distance from the top of the page */
        right: 16px; /* Distance from the right of the page */
        padding: 10px 20px;
        background-color: #007BFF;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        z-index: 1000; /* Ensures it stays above other content */
    }

    #fullscreenbutton:hover {
        background-color: #0056b3;
    }

    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' fill='%238C98F2'><polygon points='0,0 100,0 50,50'/></svg>") no-repeat;
        background-size: 12px;
        background-position: calc(100% - 10px) center;
        background-repeat: no-repeat;
        background-color: #efefef;
        color: black;
        font-size: 17px;
        padding: 5px;
        margin-top: 12px;
        margin-bottom: 16px;
        width: 350px;
    }

    iframe {
        border: 1px solid #ccc;
        background-color: #ffffff;
    }

    #footer1{
        margin-top: 12px;
        margin-bottom: 12px;
        color: #ffd324;
    }

    #footer2{
        margin-top: 12px;
        margin-bottom: 0px;
        color: #ffd324;
    }

    #website_help{
        font-size: 28pt;
        position: absolute;
        left: 16px;
        top: 12px;
        color: #ff6699;
    }

</style>

</head>

<body>

    <div class="container">
        <a id="website_help" href="https://michaeleskin.com/abctools/userguide.html" target="_blank" style="text-decoration:none;" title="Information about using this tunebook" class="cornerbutton">?</a>
        <button id="fullscreenbutton">Full Screen</button>
        <h1 id="title"><span style="font-family: 'Trebuchet MS', Helvetica, sans-serif;">Novi Sad Session Setlist</span></h1>
        <select id="tuneSelector" style="margin-right:12px;">
            <option value="">Click to Select a Tune</option>
        </select>
        <select id="displayOptions" style="width:220px;">
           <option value="-1">Tablature Display</option>
           <option value="0">Standard Notation</option>
           <option value="1">Note Names</option>
           <option value="2">Mandolin</option>
           <option value="3">Tenor Banjo</option>
           <option value="4">GDAD Bouzouki</option>
           <option value="5">Standard Guitar</option>
           <option value="6">DADGAD</option>
           <option value="7">Tin Whistle</option>
           <option value="8">Irish Flute</option>
           <option value="9">Hammered Dulcimer</option>
        </select>
        <br/>
        <iframe id="tuneFrame" src=""></iframe>
        <p id="footer1"><a href="https://t.me/irish_sessions_ns" target="_blank" style="color: #ffd324; font-family: 'Trebuchet MS', Helvetica, sans-serif;">Follow Trad Sessions NS</a></p>
    </div>

    <script>

    const tunes=[{"Name":"POLKAS John Walsh's Set","URL":"https://michaeleskin.com/abctools/abctools.html?lzw=BoLgBAjAUAKuAKB5AMgaQIIGVwCkD2AFgHZgDqAhgDYDOBA5NWJgKYAusuhJFN9jAcngB0kMAHowAcTwAjSuQDGBciQkARZgCdNATwDmVSsxIAhTQEsAJnuZQAwuAdh8xMlVr3w2MOiKs8qmDweJQK5GAqYABKALfizlxuvFDI4BBiABxQALLgAExiACxQUQghANbkUACKaUUAvBCFAAxQqOCSALbkAFZQAKTkMgo91AD61HgArkSWAGYBrGBzlFNWA-3ZAJJqW2AADpp4eprknWCt-Zs7ezLk1NSHxxcb27tgSnialk96L1dvW73agANxCYAAbMUATcPgQvpYwZRIcU1AAfECSAB86DAJnQaMkAFEwESseiTAAacmkimUtS0tFQbG4-GEklkuk0onoiBSPJSNQgNECySikxiSxiNFMjF6AVzPRo8h-PRichiNXMaWWEx4sQKMQS9DSll4yxMvRYv6K5Wq9WasTatG6vEEvli83C0Wi9FMuAJVw8WgMeLZAIg8inPEWay2dpSbp9DGSPUSw3G6UAQmozD0RDwWdTeIz0vQeoUFuYljxOKZxfTRrEJsJadLaPLH3d-MF3p7qZlUAx1jAao1Wp1babHYrVZrJixCiZI7HjudrpM7c7CgJntTwtlIBXGpk0pVo7yaO1c01YGrLrTi+Xqqx5DRMlVVbEN7+9-lo4dCcswUPBLHILMDw3A0mxNLM1CETAhCzQcAxcbh3D4eI1CoHRQ2ycxKEoNoOiTIdMT1SxmAffVSxbbEKKoywBSlbUpQlessQY6jG0zdlaTEIlpQ9X0+0kVkLUPasaJg00OTUATTUzKQTBdZiJSlJkpJ45tZP4wTWx0qQiTRYSvRFfs-SAA&format=noten&ssp=10&name=POLKAS_John_Walsh's_Set"},{"Name":"POLKAS P and O Set","URL":"https://michaeleskin.com/abctools/abctools.html?lzw=BoLgBATAUAKuAKB5AMgaQIIGUFgIYDsATMRMTAUwBdYEAyRKAYXGbBgAtyx56xBkAjCN2AJwCWAZ0oBPMMnK52UgDRgA9pU7DxYSsNyFRlUavy4ANk3DYw6fJRNgA9N1VmAxrjz4wAJQC3TmAAQsLkRATB5ADmZuRSUMjgAIyOABxQALLgEI4ALFA+CK4A1rhQAIrJeQC8SbkADFCo4AAiALai+FAApLgARm4AVuIA+uKqAK5EAGYmlGDTZhOihD3dGQCSLRtgAA7CqlF6bWCN3etbO3244uL7h6drm9tgbuyqwoT3UY-nz1c3cQAN1cYAAbPk-pdXu9PiCzOD8gAfEDoJQtMAtACiSIAYgBxRy45xYlpIrGMQQAPjJFMxjCRUDRGOxeIgYCx+Lx6DA+LcSKSYEI7MI6BASJFPMI5CRjJR03Z5H5hDcNi5WNVbkISPIIplUGmxCVSJVau5vP5guFQvI4pFktlNDYqhOGXYojcAHJtAA5VQAOjASSarTauEGUBR1q1jjcjiRQR5uPQCfZQX5ibAycZ0schGcMbjCaTtNxvIZgtJWbFEo5LLRjpRLSpWOrxazpd5OMz2agzdb2Z7nfxFbrmIgdrH2cZcGdrvdXt9AcgIcxYYjKPQQVe2vIxDj+bjQXjW53OsVEEZ6Cp261Ov3N6Rp7cMqt5DzBaC4tr1sIVOmjYgLg0xgHuSIKqBl7Xreu6KtMjhRPGUDAaB2oQeQKbQa8r5CiK-6Trm+avEEso2LkspAA&format=noten&ssp=10&name=POLKAS_P_and_O_Set"},{"Name":"POLKAS Toureendarby Set","URL":"https://michaeleskin.com/abctools/abctools.html?lzw=BoLgBAzAUAKuAKB5AMgaQIIGVwwPYFcAnAU2IDsATAQ0ICMBPMTYgF1hwJPOrsYHowAYSKEqAcwAWYAEpUAxsQDOUQeFVgYoigEsW23GSoAbFeGxh0ZFgbAAyDVTL0qYATG0BbD40QByQQZkuIQANEwAl1Qe+IpgAELEYkbE9FAAsuAATHwALFDI4ACMfAAcUACKRbkAvIU5AAxQqOAAohTBUACkVLRyAFaKAPqKBJQAZgYsYGNG+NoUXZ1pAJIAIstgAA6EuGKiHmCNnUtrG7RUiorbu4eLK+tgchLBFNdit8f3ZxeKAG64RjAADY8p9To9noQKP9ASCoAAfEBxFpgABiLXhyLRGNWAD4Uaj0PDVgSiVAsejMQScfi0UTCtiwC10CB4ZlGS1MvD4QiQMR2RQ4vDiGM+MQBIL4ehUWAKKipXE+HIJVyoCKxRKherxbKhdLZfKGeimXFWezjRRcXJuewmNpEsQwLgxkyyGRtLEBHFHABrWLOsDLMi-YiEMhKZTNMAAcQ8VD6vLxKNWcRCxJR0dxRLiFAsivQfHh0ZRcgxUCTYBTaZJMazmNz6HzhYZ0fZ0b4BfbLT4ZpjbbrPJzuvhCjAxFxFHreY7heLTNWg9zlqFo-HY3hYkdY0n-LHuPXUE30x3fFF4ooXuzDabRZLZYrVfTtav04LRf7RJ5iKHOangr4F7Crmv7EMBdbksBk5Dv+gGgfERLoNGfasl+IDRnEspcnBchcoKMZ6nwTbtvOPLobKE5AY8uLEPCeHFvCDItKslaZL2TExhiPJwPEhC6E8ShovgRiAgGmB6Cw-GRuAsbxrymboPE0ZSkhcRKfJinKUyqrqapmm-up9HsasrE2oilqOpKiF5rR1HDlZnI8uZdlIY2RZZhxDHzixbHMSS3JAA&format=noten&ssp=10&name=POLKAS_Toureendarby_Set"}];

    // Set this to false to disable state persistence
    var gAllowStatePersistence = true;

    var LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;t>e;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null===o||void 0===o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;t>e;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},p={},u="",c="",a="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(u=o.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,p[u]=!0),c=a+u,Object.prototype.hasOwnProperty.call(s,c))a=c;else{if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++),s[c]=f++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,s,p,u,c,a,l,f=[],h=4,d=4,m=3,v="",w=[],A={val:e(0),position:n,index:1};for(i=0;3>i;i+=1)f[i]=i;for(p=0,c=Math.pow(2,2),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(t=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 2:return""}for(f[3]=l,s=l,w.push(l);;){if(A.index>o)return"";for(p=0,c=Math.pow(2,m),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(l=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 2:return w.join("")}if(0==h&&(h=Math.pow(2,m),m++),f[l])v=f[l];else{if(l!==d)return null;v=s+s.charAt(0)}w.push(v),f[d++]=s+v.charAt(0),h--,s=v,0==h&&(h=Math.pow(2,m),m++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);

    // Set this to false to disable changing instruments when switching tablature
    var gAllowInstrumentChanges = true;

    var isBanjo = false;
    var isFlute = false;
    var isDulcimer = false;

    var lastURL = "";

    // Populate the selector with options from JSON
    document.addEventListener('DOMContentLoaded', () => {

        document.getElementById('fullscreenbutton').addEventListener('click', function() {
            if (lastURL != ""){
             window.open(lastURL, '_blank');
            }
        });

        const tuneSelector = document.getElementById('tuneSelector');

        const tuneFrame = document.getElementById('tuneFrame');

        if (tunes.length > 1){

           tunes.forEach(tune => {
               const option = document.createElement('option');
               option.value = tune.URL;
               option.textContent = tune.Name;
               tuneSelector.appendChild(option);
           });

           // Update iframe src when an option is selected
           tuneSelector.addEventListener('change', () => {

               var theURL = tuneSelector.value;

               if (theURL == "")return;

               theURL = theURL.replace(/&format=([^&]+)/g,"&format="+tabStyle);

               if (gAllowInstrumentChanges){
                  theURL = injectInstrument(theURL);
               }

               tuneFrame.src = theURL;
               lastURL = theURL;

               // Save last tune
               if (gAllowStatePersistence){

                   if (window.localStorage){

                       localStorage.lastTuneName_RPKZXDV = tuneSelector.options[tuneSelector.selectedIndex].text;

                       var theLastTuneTab = document.getElementById('displayOptions').value;
                       localStorage.lastTab_RPKZXDV = theLastTuneTab;

                   }

               }

           });
        }
        else{

           tuneSelector.style.display="none";

           setTimeout(function(){

             var theURL = tunes[0].URL;

             if (theURL == "")return;

             theURL = theURL.replace(/&format=([^&]+)/g,"&format="+tabStyle);

             if (gAllowInstrumentChanges){
                 theURL = injectInstrument(theURL);
             }

             tuneFrame.src = theURL;
             lastURL = theURL;

           },250);
        }

        var tabStyle = "noten";

        //
        // Decompress the tune LZW, replace the instrument and volumes
        //

        function extractLZWParameter(url) {
           // Use a regular expression to find the part starting with &lzw= followed by any characters until the next &
            const match = url.match(/lzw=([^&]*)/);

            // If a match is found, return the part after &lzw=
            return match ? match[0] : null;
        }

        function injectInstrument(theURL){

            var originalAbcInLZW = extractLZWParameter(theURL);

            originalAbcInLZW = originalAbcInLZW.replace("lzw=","");

            var abcInLZW = LZString.decompressFromEncodedURIComponent(originalAbcInLZW);

            switch (tabStyle){
                case "mandolin":
                    if (isBanjo){
                        abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 105");
                    }
                    else{
                        abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 141");
                    }
                    break;
                case "gdad":
                    abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 140");
                    break;
                case "guitare":
                case "guitard":
                    abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 24\n%%MIDI transpose -12");
                    break;
                case "whistle":
                    if (isFlute){
                        abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 73");
                    }
                    else{
                        abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 78");
                    }
                    abcInLZW = abcInLZW.replace("%%MIDI bassvol 64","%%MIDI bassvol 64");
                    abcInLZW = abcInLZW.replace("%%MIDI chordvol 64","%%MIDI chordvol 64");
                    break;
                case "noten":
                    if (isDulcimer){
                        abcInLZW = abcInLZW.replace("%%MIDI program 0","%%MIDI program 15");
                    }
                    else{
                        return theURL;
                    }
                    break;
            }

            var newLZWparam = "lzw="+LZString.compressToEncodedURIComponent(abcInLZW);

            originalAbcInLZW = "lzw="+originalAbcInLZW;

            theURL = theURL.replace(originalAbcInLZW,newLZWparam);

            return theURL;
        }

        const displayOptions = document.getElementById('displayOptions');

          displayOptions.addEventListener('change', () => {

             var origTabStyle = tabStyle;

             if (displayOptions.value == "-1"){
                 return;
             }

             isBanjo = false;
             isFlute = false;
             isDulcimer = false;

             switch (displayOptions.value){
                 case "0": // Standard notation
                     tabStyle = "noten";
                     break;
                 case "1": // Note names
                     tabStyle = "notenames";
                     break;
                 case "2": // Mandolin
                     tabStyle = "mandolin";
                     break;
                 case "3": // Tenor banjo
                     isBanjo = true;
                     tabStyle = "mandolin";
                     break;
                 case "4": // GDAD
                     tabStyle = "gdad";
                     break;
                 case "5": // Guitar
                     tabStyle = "guitare";
                     break;
                 case "6": // DADGAD
                     tabStyle = "guitard";
                     break;
                 case "7": // Whistle
                     tabStyle = "whistle";
                     break;
                 case "8": // Irish flute
                     isFlute = true;
                     tabStyle = "whistle";
                     break;
                 case "9": // Hammered dulcimer
                     isDulcimer = true;
                     tabStyle = "noten";
                     break;
                 default:
                     tabStyle = "noten";
                     break;
             }

             var theURL;

             if (tunes.length > 1){
                theURL = tuneSelector.value;
             }
             else {
                theURL = tunes[0].URL;
             }

             if (theURL == "")return;

             theURL = theURL.replace(/&format=([^&]+)/g,"&format="+tabStyle);

             if (gAllowInstrumentChanges){
                 theURL = injectInstrument(theURL);
             }

             tuneFrame.src = theURL;
             lastURL = theURL;

             // Save last tune
             if (gAllowStatePersistence){

                 if (window.localStorage){

                     if (tunes.length > 1){
                         localStorage.lastTuneName_RPKZXDV = tuneSelector.options[tuneSelector.selectedIndex].text;
                     }

                     var theLastTuneTab = document.getElementById('displayOptions').value;
                     localStorage.lastTab_RPKZXDV = theLastTuneTab;
                 }

             }

        });

       function getElementsTotalHeight() {

           const ids = ['title', 'subtitle', 'displayOptions', 'footer1', 'footer2'];

           let totalHeight = 0;

           ids.forEach(id => {

               const element = document.getElementById(id);

               if (element && (element.textContent.trim() !== "")) {
                   const elementHeight = element.offsetHeight;
                   const computedStyle = window.getComputedStyle(element);

                   // Include margins
                   const marginTop = parseFloat(computedStyle.marginTop);
                   const marginBottom = parseFloat(computedStyle.marginBottom);
                   totalHeight += elementHeight + marginTop + marginBottom + 1;
               }
           });
           return totalHeight+5;
       }

       function resizeIframe() {
           const iframe = document.getElementById('tuneFrame');
           iframe.style.width = (window.innerWidth-3) + 'px';
           var otherElementsHeight = getElementsTotalHeight();
           iframe.style.height = (window.innerHeight-otherElementsHeight) + 'px';
       }

       function setSelectedTuneByName(optionText) {
           var gotMatch = false;
           for (let i = 0; i < tuneSelector.options.length; i++) {
               if (tuneSelector.options[i].text === optionText) {
                   tuneSelector.selectedIndex = i;
                   gotMatch = true;
                   break;
               }
           }
           if (gotMatch){
               tuneSelector.dispatchEvent(new Event('change'));
           }
       }

       // Resize the iframe on window resize
       window.addEventListener('resize', resizeIframe);

       // Initial call to ensure it fits when the page loads
       resizeIframe();

       // Restore state
       if (gAllowStatePersistence){

          if (window.localStorage){

              setTimeout(function(){

                var theLastTuneTab = localStorage.lastTab_RPKZXDV;
                if (theLastTuneTab && (theLastTuneTab != "")){
                    var elem = document.getElementById('displayOptions');
                    elem.value = theLastTuneTab;
                    elem.dispatchEvent(new Event('change'));
                }

                if (tunes.length > 1){

                   var theLastTuneName = localStorage.lastTuneName_RPKZXDV;
                   if (theLastTuneName && (theLastTuneName != "")){
                       setSelectedTuneByName(theLastTuneName);
                   }

                }

             },250);
          }
       }
    });

</script>

</body>

</html>
